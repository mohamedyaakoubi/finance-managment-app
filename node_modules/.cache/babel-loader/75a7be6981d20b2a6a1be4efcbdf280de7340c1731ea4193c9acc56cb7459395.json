{"ast":null,"code":"import{db}from'../config/firbase';import{collection,query,where,getDocs}from'firebase/firestore';export const fetchExpenses=async userEmail=>{try{const q=query(collection(db,'expenses'),where('userEmail','==',userEmail));const querySnapshot=await getDocs(q);const expensesList=querySnapshot.docs.map(doc=>({...doc.data(),id:doc.id}));// Calculate total balance by adding income and subtracting outcome\nconst totalBalance=expensesList.reduce((acc,expense)=>{return expense.type==='income'?acc+expense.amount:acc-expense.amount;},0);return{expensesList,totalBalance};}catch(error){console.error('Error fetching expenses:',error);throw error;}};","map":{"version":3,"names":["db","collection","query","where","getDocs","fetchExpenses","userEmail","q","querySnapshot","expensesList","docs","map","doc","data","id","totalBalance","reduce","acc","expense","type","amount","error","console"],"sources":["C:/Users/MSI/Desktop/mentor nation/github deploy/fresh-clone/src/services/api.ts"],"sourcesContent":["import { db } from '../config/firbase';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { Expense } from '../interfaces/ExpensesInterface';\r\n\r\nexport const fetchExpenses = async (userEmail: string) => {\r\n    try {\r\n        const q = query(collection(db, 'expenses'), where('userEmail', '==', userEmail));\r\n        const querySnapshot = await getDocs(q);\r\n        const expensesList: Expense[] = querySnapshot.docs.map(doc => ({\r\n            ...doc.data() as Expense,\r\n            id: doc.id\r\n        }));\r\n\r\n        // Calculate total balance by adding income and subtracting outcome\r\n        const totalBalance = expensesList.reduce((acc, expense) => {\r\n            return expense.type === 'income' ? acc + expense.amount : acc - expense.amount;\r\n        }, 0);\r\n\r\n        return { expensesList, totalBalance };\r\n    } catch (error) {\r\n        console.error('Error fetching expenses:', error);\r\n        throw error;\r\n    }\r\n};\r\n"],"mappings":"AAAA,OAASA,EAAE,KAAQ,mBAAmB,CACtC,OAASC,UAAU,CAAEC,KAAK,CAAEC,KAAK,CAAEC,OAAO,KAAQ,oBAAoB,CAGtE,MAAO,MAAM,CAAAC,aAAa,CAAG,KAAO,CAAAC,SAAiB,EAAK,CACtD,GAAI,CACA,KAAM,CAAAC,CAAC,CAAGL,KAAK,CAACD,UAAU,CAACD,EAAE,CAAE,UAAU,CAAC,CAAEG,KAAK,CAAC,WAAW,CAAE,IAAI,CAAEG,SAAS,CAAC,CAAC,CAChF,KAAM,CAAAE,aAAa,CAAG,KAAM,CAAAJ,OAAO,CAACG,CAAC,CAAC,CACtC,KAAM,CAAAE,YAAuB,CAAGD,aAAa,CAACE,IAAI,CAACC,GAAG,CAACC,GAAG,GAAK,CAC3D,GAAGA,GAAG,CAACC,IAAI,CAAC,CAAY,CACxBC,EAAE,CAAEF,GAAG,CAACE,EACZ,CAAC,CAAC,CAAC,CAEH;AACA,KAAM,CAAAC,YAAY,CAAGN,YAAY,CAACO,MAAM,CAAC,CAACC,GAAG,CAAEC,OAAO,GAAK,CACvD,MAAO,CAAAA,OAAO,CAACC,IAAI,GAAK,QAAQ,CAAGF,GAAG,CAAGC,OAAO,CAACE,MAAM,CAAGH,GAAG,CAAGC,OAAO,CAACE,MAAM,CAClF,CAAC,CAAE,CAAC,CAAC,CAEL,MAAO,CAAEX,YAAY,CAAEM,YAAa,CAAC,CACzC,CAAE,MAAOM,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD,KAAM,CAAAA,KAAK,CACf,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}