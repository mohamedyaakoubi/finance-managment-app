{"ast":null,"code":"import'../Styles/DashBoard.css';import{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{fetchExpenses}from'../services/api';import{db}from'../config/firbase';// Update this import based on your Firebase config\nimport{collection,addDoc,deleteDoc,doc}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const DashBoard=()=>{const[expenses,setExpenses]=useState([]);const[balance,setBalance]=useState(0);const[newExpenseName,setNewExpenseName]=useState('');const[newExpenseAmount,setNewExpenseAmount]=useState();const[newExpenseType,setNewExpenseType]=useState('outcome');const navigate=useNavigate();useEffect(()=>{const authUserString=localStorage.getItem('auth');if(authUserString){const authUser=JSON.parse(authUserString);fetchExpenses(authUser.email).then(_ref=>{let{expensesList,totalBalance}=_ref;setExpenses(expensesList);setBalance(totalBalance);}).catch(error=>{console.error('Error fetching expenses:',error);});}else{navigate('/login');}},[navigate]);const handleAddExpense=async()=>{const authUserString=localStorage.getItem('auth');if(authUserString){const authUser=JSON.parse(authUserString);try{await addDoc(collection(db,'expenses'),{name:newExpenseName,amount:newExpenseAmount,type:newExpenseType,userEmail:authUser.email});// Refresh expenses list\nfetchExpenses(authUser.email).then(_ref2=>{let{expensesList,totalBalance}=_ref2;setExpenses(expensesList);setBalance(totalBalance);});// Clear input fields\nsetNewExpenseName('');setNewExpenseAmount(0);setNewExpenseType('outcome');}catch(error){console.error('Error adding expense:',error);}}};const handleDeleteExpense=async id=>{try{await deleteDoc(doc(db,'expenses',id));// Refresh expenses list\nconst authUserString=localStorage.getItem('auth');if(authUserString){const authUser=JSON.parse(authUserString);fetchExpenses(authUser.email).then(_ref3=>{let{expensesList,totalBalance}=_ref3;setExpenses(expensesList);setBalance(totalBalance);});}}catch(error){console.error('Error deleting expense:',error);}};const handleLogOut=()=>{localStorage.removeItem('auth');navigate('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Balance: $\",balance.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-expense-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newExpenseName,onChange:e=>setNewExpenseName(e.target.value),placeholder:\"Expense Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newExpenseAmount,onChange:e=>setNewExpenseAmount(Number(e.target.value)),placeholder:\"Amount\"}),/*#__PURE__*/_jsxs(\"select\",{value:newExpenseType,onChange:e=>setNewExpenseType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"income\",children:\"Income\"}),/*#__PURE__*/_jsx(\"option\",{value:\"outcome\",children:\"Outcome\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddExpense,children:\"Add Expense\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"expense-list\",children:expenses.map(expense=>/*#__PURE__*/_jsxs(\"li\",{children:[expense.name,\" - $\",expense.amount,\" (\",expense.type,\")\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteExpense(expense.id),children:\"Delete\"})]},expense.id))})]});};","map":{"version":3,"names":["useEffect","useState","useNavigate","fetchExpenses","db","collection","addDoc","deleteDoc","doc","jsx","_jsx","jsxs","_jsxs","DashBoard","expenses","setExpenses","balance","setBalance","newExpenseName","setNewExpenseName","newExpenseAmount","setNewExpenseAmount","newExpenseType","setNewExpenseType","navigate","authUserString","localStorage","getItem","authUser","JSON","parse","email","then","_ref","expensesList","totalBalance","catch","error","console","handleAddExpense","name","amount","type","userEmail","_ref2","handleDeleteExpense","id","_ref3","handleLogOut","removeItem","className","children","toFixed","value","onChange","e","target","placeholder","Number","onClick","map","expense"],"sources":["C:/Users/MSI/Desktop/mentor nation/github deploy/fresh-clone/src/Components/DashBoard.tsx"],"sourcesContent":["import '../Styles/DashBoard.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { fetchExpenses } from '../services/api';\r\nimport { Expense } from '../interfaces/ExpensesInterface';\r\nimport { db } from '../config/firbase'; // Update this import based on your Firebase config\r\nimport { collection, addDoc, deleteDoc, doc } from 'firebase/firestore';\r\n\r\nexport const DashBoard = () => {\r\n    const [expenses, setExpenses] = useState<Expense[]>([]);\r\n    const [balance, setBalance] = useState<number>(0);\r\n    const [newExpenseName, setNewExpenseName] = useState<string>('');\r\n    const [newExpenseAmount, setNewExpenseAmount] = useState<number>();\r\n    const [newExpenseType, setNewExpenseType] = useState<'income' | 'outcome'>('outcome');\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const authUserString = localStorage.getItem('auth');\r\n        if (authUserString) {\r\n            const authUser = JSON.parse(authUserString);\r\n            fetchExpenses(authUser.email).then(({ expensesList, totalBalance }) => {\r\n                setExpenses(expensesList);\r\n                setBalance(totalBalance);\r\n            }).catch(error => {\r\n                console.error('Error fetching expenses:', error);\r\n            });\r\n        } else {\r\n            navigate('/login');\r\n        }\r\n    }, [navigate]);\r\n\r\n    const handleAddExpense = async () => {\r\n        const authUserString = localStorage.getItem('auth');\r\n        if (authUserString) {\r\n            const authUser = JSON.parse(authUserString);\r\n            try {\r\n                await addDoc(collection(db, 'expenses'), {\r\n                    name: newExpenseName,\r\n                    amount: newExpenseAmount,\r\n                    type: newExpenseType,\r\n                    userEmail: authUser.email,\r\n                });\r\n                // Refresh expenses list\r\n                fetchExpenses(authUser.email).then(({ expensesList, totalBalance }) => {\r\n                    setExpenses(expensesList);\r\n                    setBalance(totalBalance);\r\n                });\r\n                // Clear input fields\r\n                setNewExpenseName('');\r\n                setNewExpenseAmount(0);\r\n                setNewExpenseType('outcome');\r\n            } catch (error) {\r\n                console.error('Error adding expense:', error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteExpense = async (id: string) => {\r\n        try {\r\n            await deleteDoc(doc(db, 'expenses', id));\r\n            // Refresh expenses list\r\n            const authUserString = localStorage.getItem('auth');\r\n            if (authUserString) {\r\n                const authUser = JSON.parse(authUserString);\r\n                fetchExpenses(authUser.email).then(({ expensesList, totalBalance }) => {\r\n                    setExpenses(expensesList);\r\n                    setBalance(totalBalance);\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting expense:', error);\r\n        }\r\n    };\r\n\r\n    const handleLogOut = () => {\r\n        localStorage.removeItem('auth');\r\n        navigate('/login');\r\n    };\r\n\r\n    return (\r\n        <div className=\"dashboard-container\">\r\n            <h1>Dashboard</h1>\r\n            <p>Balance: ${balance.toFixed(2)}</p>\r\n\r\n            <div className=\"add-expense-form\">\r\n                <input \r\n                    type=\"text\" \r\n                    value={newExpenseName} \r\n                    onChange={(e) => setNewExpenseName(e.target.value)} \r\n                    placeholder=\"Expense Name\" \r\n                />\r\n                <input \r\n                    type=\"number\" \r\n                    value={newExpenseAmount} \r\n                    onChange={(e) => setNewExpenseAmount(Number(e.target.value))} \r\n                    placeholder=\"Amount\" \r\n                />\r\n                <select value={newExpenseType} onChange={(e) => setNewExpenseType(e.target.value as 'income' | 'outcome')}>\r\n                    <option value=\"income\">Income</option>\r\n                    <option value=\"outcome\">Outcome</option>\r\n                </select>\r\n                <button onClick={handleAddExpense}>Add Expense</button>\r\n            </div>\r\n\r\n            <ul className=\"expense-list\">\r\n                {expenses.map(expense => (\r\n                    <li key={expense.id}>\r\n                        {expense.name} - ${expense.amount} ({expense.type})\r\n                        <button onClick={() => handleDeleteExpense(expense.id)}>Delete</button>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}